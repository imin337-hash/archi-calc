<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê±´ì¶• ì‹¤ë¬´ í†µí•© ë„êµ¬</title>
    <style>
        /* ê³µí†µ ìŠ¤íƒ€ì¼ */
        body { font-family: 'Pretendard', 'Malgun Gothic', sans-serif; background-color: #f0f2f5; margin: 0; padding: 0; }
        .app-wrapper { max-width: 800px; margin: 0 auto; padding: 20px; }
        
        /* ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜ (ëª¨ë“œ ì „í™˜) */
        .main-nav { display: flex; gap: 10px; margin-bottom: 20px; }
        .nav-item { flex: 1; padding: 15px; border: none; border-radius: 10px; background: #e0e0e0; color: #555; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s; text-align: center; }
        .nav-item.active-mode { background-color: #333; color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .nav-item:hover:not(.active-mode) { background-color: #d0d0d0; }

        /* ì„¹ì…˜ ì œì–´ */
        .mode-section { display: none; animation: fadeIn 0.4s; }
        .mode-section.active { display: block; }
        
        /* ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .card { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }

        /* --- [ëª¨ë“œ 1] ê³„ì‚°ê¸° ìŠ¤íƒ€ì¼ --- */
        .tab-menu { display: flex; border-bottom: 2px solid #eee; margin-bottom: 20px; }
        .tab-btn { flex: 1; padding: 12px; border: none; background: none; cursor: pointer; font-weight: bold; color: #888; border-bottom: 3px solid transparent; }
        .tab-btn.active { color: #2DB400; border-bottom-color: #2DB400; }
        .calc-content { display: none; }
        .calc-content.active { display: block; }

        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #444; font-size: 14px; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 15px; box-sizing: border-box; }
        input:focus { border-color: #2DB400; outline: none; }

        .btn-action { width: 100%; padding: 14px; background-color: #2DB400; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 5px; }
        .btn-action:hover { background-color: #259600; }
        
        .result-box { margin-top: 15px; padding: 15px; background: #f8f9fa; border-left: 5px solid #2DB400; border-radius: 5px; display: none; line-height: 1.5; color: #333; }
        .highlight { color: #d35400; font-weight: bold; font-size: 1.2em; }

        /* --- [ëª¨ë“œ 2] ê°œìš”í‘œ ìŠ¤íƒ€ì¼ --- */
        .overview-layout { display: flex; flex-direction: column; gap: 20px; }
        .preview-box { background: #f9f9f9; padding: 15px; border-radius: 8px; border: 1px dashed #ccc; }
        .btn-copy { width: 100%; padding: 12px; background-color: #333; color: white; border: none; border-radius: 8px; cursor: pointer; margin-top: 10px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="app-wrapper">
    <nav class="main-nav">
        <button class="nav-item active-mode" onclick="switchMode('calc')">ğŸ§® ê³µì‚¬ ê³„ì‚°ê¸°</button>
        <button class="nav-item" onclick="switchMode('doc')">ğŸ“ ê±´ì¶•ê°œìš” ì‘ì„±</button>
    </nav>

    <div id="mode-calc" class="mode-section active">
        <div class="card">
            <div class="tab-menu">
                <button class="tab-btn active" onclick="openCalcTab(event, 'c_area')">í‰ìˆ˜ë³€í™˜</button>
                <button class="tab-btn" onclick="openCalcTab(event, 'c_tile')">íƒ€ì¼ë¬¼ëŸ‰</button>
                <button class="tab-btn" onclick="openCalcTab(event, 'c_conc')">ë ˆë¯¸ì½˜</button>
            </div>

            <div id="c_area" class="calc-content active">
                <div class="input-group">
                    <label>í‰ìˆ˜ ì…ë ¥</label>
                    <input type="number" id="pyeongInput" placeholder="ì˜ˆ: 32">
                </div>
                <button class="btn-action" onclick="runCalcArea()">ë³€í™˜í•˜ê¸°</button>
                <div id="res1" class="result-box"></div>
            </div>

            <div id="c_tile" class="calc-content">
                <div class="input-group">
                    <label>ì‹œê³µ ë©´ì  ($m^2$)</label>
                    <input type="number" id="wallArea" placeholder="í—¤ë²  ì…ë ¥">
                </div>
                <div class="input-group">
                    <label>íƒ€ì¼ í¬ê¸° (mm)</label>
                    <div style="display:flex; gap:10px;">
                        <input type="number" id="tileW" placeholder="ê°€ë¡œ (ì˜ˆ: 300)">
                        <input type="number" id="tileH" placeholder="ì„¸ë¡œ (ì˜ˆ: 600)">
                    </div>
                </div>
                <div class="input-group">
                    <label>ë¡œìŠ¤ìœ¨</label>
                    <select id="lossRate">
                        <option value="1.05">5% (ì¼ë°˜)</option>
                        <option value="1.10">10% (ë³µì¡)</option>
                        <option value="1.00">ì—†ìŒ</option>
                    </select>
                </div>
                <button class="btn-action" onclick="runCalcTile()">íƒ€ì¼ ìˆ˜ëŸ‰ ê³„ì‚°</button>
                <div id="res2" class="result-box"></div>
            </div>

            <div id="c_conc" class="calc-content">
                <div class="input-group">
                    <label>íƒ€ì„¤ ê³µê°„ í¬ê¸° (m)</label>
                    <div style="display:flex; gap:10px; margin-bottom:5px;">
                        <input type="number" id="concW" placeholder="ê°€ë¡œ(m)">
                        <input type="number" id="concL" placeholder="ì„¸ë¡œ(m)">
                    </div>
                    <input type="number" id="concH" placeholder="ë†’ì´/ë‘ê»˜ (cm ë‹¨ìœ„!!)">
                </div>
                <button class="btn-action" onclick="runCalcConc()">ë£¨ë²  ê³„ì‚°</button>
                <div id="res3" class="result-box"></div>
            </div>
        </div>
    </div>

    <div id="mode-doc" class="mode-section">
        <div class="card overview-layout">
            <div style="background:#f1f3f5; padding:15px; border-radius:8px;">
                <h3 style="margin:0 0 15px 0; font-size:16px;">ğŸ—ï¸ ê¸°ë³¸ ì •ë³´ ì…ë ¥</h3>
                <div class="input-group"><label>ê³µì‚¬ëª…</label><input type="text" id="ov_loc" placeholder="ì˜ˆ: ì–‘í‰ ë‹¨ë…ì£¼íƒ ì‹ ì¶•"></div>
                <div class="input-group"><label>ëŒ€ì§€ë©´ì  ($m^2$)</label><input type="number" id="ov_site" placeholder="ìˆ«ìë§Œ"></div>
                <div class="input-group"><label>ê±´ì¶•ë©´ì  ($m^2$)</label><input type="number" id="ov_build" placeholder="ìˆ«ìë§Œ"></div>
                <div class="input-group"><label>ì§€ìƒ ì—°ë©´ì  ($m^2$)</label><input type="number" id="ov_floor" placeholder="ìš©ì ë¥  ê³„ì‚°ìš©"></div>
                <div class="input-group"><label>ì „ì²´ ì—°ë©´ì  ($m^2$)</label><input type="number" id="ov_total" placeholder="ì§€í•˜ í¬í•¨"></div>
                <div class="input-group"><label>ê·œëª¨/êµ¬ì¡°</label><input type="text" id="ov_scale" placeholder="ì˜ˆ: ì§€ìƒ2ì¸µ / ì² ì½˜"></div>
                <div class="input-group"><label>ì£¼ì°¨ëŒ€ìˆ˜</label><input type="text" id="ov_park" placeholder="ì˜ˆ: 2ëŒ€"></div>
                <button class="btn-action" onclick="generateTable()">í‘œ ìƒì„±í•˜ê¸°</button>
            </div>

            <div class="preview-box">
                <label>â–¼ ê²°ê³¼ (í‘œ ë³µì‚¬ í›„ ë¸”ë¡œê·¸ì— ë¶™ì—¬ë„£ê¸°)</label>
                <div id="tableResult" style="background:white; padding:10px;">
                    <p style="text-align:center; color:#999; padding:20px;">ì •ë³´ ì…ë ¥ í›„ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</p>
                </div>
                <button class="btn-copy" onclick="copyResult()">ğŸ“‹ í‘œ ë³µì‚¬í•˜ê¸°</button>
            </div>
        </div>
    </div>
</div>

<script>
    // --- 1. ëª¨ë“œ ì „í™˜ (ê³„ì‚°ê¸° <-> ê°œìš”) ---
    function switchMode(mode) {
        document.querySelectorAll('.mode-section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active-mode'));
        
        document.getElementById('mode-' + mode).classList.add('active');
        // ë²„íŠ¼ í™œì„±í™” ìŠ¤íƒ€ì¼ ì²˜ë¦¬
        if(mode === 'calc') document.querySelector('.nav-item:nth-child(1)').classList.add('active-mode');
        else document.querySelector('.nav-item:nth-child(2)').classList.add('active-mode');
    }

    // --- 2. ê³„ì‚°ê¸° íƒ­ ì „í™˜ ---
    function openCalcTab(evt, tabName) {
        document.querySelectorAll('.calc-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(tabName).classList.add('active');
        evt.currentTarget.classList.add('active');
    }

    // --- 3. ê³„ì‚° ë¡œì§ë“¤ ---
    function showMsg(id, html) {
        const box = document.getElementById(id);
        box.innerHTML = html;
        box.style.display = 'block';
    }

    function runCalcArea() {
        const p = parseFloat(document.getElementById('pyeongInput').value);
        if(!p) return;
        const m2 = (p * 3.305785).toFixed(2);
        showMsg('res1', `${p}í‰ì€ <span class="highlight">${m2}</span>mÂ² ì…ë‹ˆë‹¤.`);
    }

    function runCalcTile() {
        const area = parseFloat(document.getElementById('wallArea').value);
        const w = parseFloat(document.getElementById('tileW').value);
        const h = parseFloat(document.getElementById('tileH').value);
        const loss = parseFloat(document.getElementById('lossRate').value);
        if(!area || !w || !h) return alert('ëª¨ë“  ê°’ì„ ë„£ì–´ì£¼ì„¸ìš”');
        
        const oneTile = (w/1000) * (h/1000);
        const total = Math.ceil((area / oneTile) * loss);
        showMsg('res2', `í•„ìš” íƒ€ì¼: <span class="highlight">${total}</span>ì¥ (ì—¬ìœ ë¶„ í¬í•¨)`);
    }

    function runCalcConc() {
        const w = parseFloat(document.getElementById('concW').value);
        const l = parseFloat(document.getElementById('concL').value);
        const h = parseFloat(document.getElementById('concH').value);
        if(!w || !l || !h) return alert('ëª¨ë“  ì¹˜ìˆ˜ë¥¼ ë„£ì–´ì£¼ì„¸ìš”');
        
        const vol = (w * l * (h/100)).toFixed(2);
        const trucks = (vol / 6).toFixed(1);
        showMsg('res3', `ë¶€í”¼: <span class="highlight">${vol}</span>mÂ³ (ë£¨ë² )<br>ë ˆë¯¸ì½˜(6mÂ³): ì•½ <b>${trucks}ëŒ€</b>`);
    }

    // --- 4. ê±´ì¶•ê°œìš” í‘œ ìƒì„± ë° ë³µì‚¬ ---
    function generateTable() {
        const d = {
            loc: document.getElementById('ov_loc').value,
            site: document.getElementById('ov_site').value,
            build: document.getElementById('ov_build').value,
            floor: document.getElementById('ov_floor').value,
            total: document.getElementById('ov_total').value,
            scale: document.getElementById('ov_scale').value,
            park: document.getElementById('ov_park').value
        };

        if(!d.site) return alert("ëŒ€ì§€ë©´ì ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        
        const bcr = ((d.build / d.site) * 100).toFixed(2);
        const far = ((d.floor / d.site) * 100).toFixed(2);

        const html = `
        <table style="width:100%; border-collapse:collapse; font-size:14px; font-family:'Malgun Gothic'; text-align:left;">
            <tr><th style="background:#eee;border:1px solid #ccc;padding:8px;width:30%;">ê³µì‚¬ëª…</th><td style="border:1px solid #ccc;padding:8px;">${d.loc}</td></tr>
            <tr><th style="background:#eee;border:1px solid #ccc;padding:8px;">ëŒ€ì§€ë©´ì </th><td style="border:1px solid #ccc;padding:8px;">${d.site}mÂ²</td></tr>
            <tr><th style="background:#eee;border:1px solid #ccc;padding:8px;">ê±´ì¶•ë©´ì </th><td style="border:1px solid #ccc;padding:8px;">${d.build}mÂ²</td></tr>
            <tr><th style="background:#eee;border:1px solid #ccc;padding:8px;">ì—°ë©´ì </th><td style="border:1px solid #ccc;padding:8px;">${d.total}mÂ²</td></tr>
            <tr><th style="background:#eee;border:1px solid #ccc;padding:8px;">ê±´íìœ¨</th><td style="border:1px solid #ccc;padding:8px;color:#d35400;"><b>${bcr}%</b></td></tr>
            <tr><th style="background:#eee;border:1px solid #ccc;padding:8px;">ìš©ì ë¥ </th><td style="border:1px solid #ccc;padding:8px;color:#d35400;"><b>${far}%</b></td></tr>
            <tr><th style="background:#eee;border:1px solid #ccc;padding:8px;">ê·œëª¨/êµ¬ì¡°</th><td style="border:1px solid #ccc;padding:8px;">${d.scale}</td></tr>
            <tr><th style="background:#eee;border:1px solid #ccc;padding:8px;">ì£¼ì°¨</th><td style="border:1px solid #ccc;padding:8px;">${d.park}</td></tr>
        </table>`;
        
        document.getElementById('tableResult').innerHTML = html;
    }

    function copyResult() {
        const node = document.getElementById('tableResult');
        if(!node.querySelector('table')) return alert('ë¨¼ì € í‘œë¥¼ ìƒì„±í•˜ì„¸ìš”.');
        
        const selection = window.getSelection();
        const range = document.createRange();
        range.selectNodeContents(node);
        selection.removeAllRanges();
        selection.addRange(range);
        
        try {
            document.execCommand('copy');
            alert('í‘œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸”ë¡œê·¸ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!');
        } catch(e) {
            alert('ë³µì‚¬ ì‹¤íŒ¨. ë“œë˜ê·¸í•´ì„œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
        }
        selection.removeAllRanges();
    }
</script>

</body>
</html>
