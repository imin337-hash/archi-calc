<script>
    // 탭 전환 함수 (기존과 동일)
    function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
            tabcontent[i].classList.remove("active");
        }
        tablinks = document.getElementsByClassName("tab-btn");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].classList.remove("active");
        }
        document.getElementById(tabName).style.display = "block";
        document.getElementById(tabName).classList.add("active");
        evt.currentTarget.classList.add("active");
    }

    // 1. 평수 계산 로직 (수정됨!)
    function calcArea() {
        const p = parseFloat(document.getElementById('pyeongInput').value);
        if(!p) return alert("평수를 입력해주세요");
        const m2 = (p * 3.305785).toFixed(2);
        
        // <br> 태그를 삭제하여 한 줄로 나오게 수정했습니다.
        // m2(제곱미터) 표시도 m² 위첨자로 깔끔하게 변경했습니다.
        showResult('res1', `${p}평은 <span class="highlight">${m2}</span>m<sup>2</sup> 입니다.`);
    }

    // 2. 타일 계산 로직
    function calcTile() {
        const area = parseFloat(document.getElementById('wallArea').value);
        const w = parseFloat(document.getElementById('tileW').value);
        const h = parseFloat(document.getElementById('tileH').value);
        const loss = parseFloat(document.getElementById('lossRate').value);

        if(!area || !w || !h) return alert("모든 값을 입력해주세요");

        const tileArea = (w / 1000) * (h / 1000);
        const count = Math.ceil((area / tileArea) * loss);
        
        // 여기도 보기에 좋게 줄바꿈을 조정했습니다.
        showResult('res2', `필요한 타일은 여유분 포함 <span class="highlight">${count}</span>장 입니다.`);
    }

    // 3. 레미콘 계산 로직
    function calcConcrete() {
        const w = parseFloat(document.getElementById('concW').value);
        const l = parseFloat(document.getElementById('concL').value);
        const h = parseFloat(document.getElementById('concH').value); 

        if(!w || !l || !h) return alert("모든 치수를 입력해주세요");

        const vol = (w * l * (h / 100)).toFixed(2);
        const trucks = (vol / 6).toFixed(1);

        showResult('res3', `총 <span class="highlight">${vol}</span>m<sup>3</sup> (루베)이며, 레미콘(6m<sup>3</sup>) 약 <b>${trucks}대</b> 분량입니다.`);
    }

    // 결과 보여주기 도우미 함수
    function showResult(id, html) {
        const box = document.getElementById(id);
        box.innerHTML = '<div class="result-text">' + html + '</div>';
        box.style.display = 'block';
    }
</script>
